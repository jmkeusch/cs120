<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <script src="https://code.jquery.com/jquery-3.5.1.js"></script>

    <title>Unit 2 | PS3 | JSON 3</title>
  </head>

  <body>
    <form name="form1">
        <label for="dropdown">Genre:</label>
            <select id="dropdown">
            </select>
        <input type="button" id="btn1" value="Filter">

    <script language="javascript">
        //GLOBAL VARS
        let range = new Set ();
        let object = new Object ();

        var populate = function () {
            var listItem = "";
            range.forEach (function(value) {
                listItem += "<option value='" + value + "'>" + value + "</option>";
                $("#dropdown").html(listItem);
                console.log("Adding " + value);
            })
        }


        $(document).ready(function () {
            $.getJSON("https://jmkeusch.github.io/cs120/unit2_PS3/songs.json", function (data) {
                $.each(data, function (key, value) {
                    var genres = value.genre;
                    for (let i = 0; i < genres.length; i++) {
                        var gen = value.genre[i];
                        range.add(gen);
                        console.log("Retrieving " + gen);
                    }
                })
            })
            populate();
        });

        




        // //event handler
        window.onload=function() {
            btnObj= document.getElementById("btn1");
            btnObj.onclick = () => alert("You pressed "+ btnObj.value + "!") 
        }// end for



        //    //Populate genre options on form
        //    function popOptions() {
        //         var listItem = "";
        //         range.forEach (function(value) {
        //         listItem += "<option value='" + value + "'>" + value + "</option>";
        //         $("#dropdown").html(listItem);
        //         })
        //     }


    //     var range = new Set ();
    //     //let rep = []
    //     //Read in JSON data
    //     $(window).load(function () {
    //     //JSON data retrieved/stored in 'data'
    //     $.getJSON("https://jmkeusch.github.io/cs120/unit2_PS3/songs.json", function (data) {
    //         //Get Genre options
    //         $.each(data, function (key, value) {
    //             var genres = value.genre;
    //             for (let i = 0; i < genres.length; i++) {
    //                 var gen = value.genre[i];
    //                 range.add(gen);
    //             }
    //         })
    //     })
    //     popOptions();
    //    })

    //    //Populate genre options on form
    //    function popOptions() {
    //         var listItem = "";
    //         range.forEach (function(value) {
    //         listItem += "<option value='" + value + "'>" + value + "</option>";
    //         $("#dropdown").html(listItem);
    //         })
    //     }
        
        //event handler
        // window.onload=function() {
        //     btnObj= document.getElementById("btn1");
        //     btnObj.onclick = () => alert("You pressed "+ btnObj.value + "!") 
        // }// end for


        function displaySongs() {
            console.log("in display songs");
            let interest = document.getElementById("dropdown").selectedIndex.value;
            document.write("sel is: " + sel);

            $.getJSON("https://jmkeusch.github.io/cs120/unit2_PS3/songs.json"), function (data) {
                    var sel = $("#dropdown :selected").text();
                    //each JSON obj
                    $.each(data, function (key, value) {
                        //each genre array
                        $.each(this.genre, function(sel, value) {
                            if (sel == this.value) {
                                console.log(title.value);
                            }
                        })
                    })
                }
            }       

    </script>
  </body>
</html>

