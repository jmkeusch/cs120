<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Unit 2 | PS3 | JSON 3</title>
        <script src="https://code.jquery.com/jquery-3.7.0.min.js" 
                integrity="sha256-2Pmvv0kuTBOenSvLm6bvfBSSHrUJ+3A7x6P5Ebd07/g=" 
                crossorigin="anonymous">
        </script>
  </head>

  <body>
    <form name="form1">
        <label for="dropdown">Genre:</label>
            <select id="dropdown">
            </select>
        <input type="button" value="Filter" id="btn1">
    </form>
    <div id="results">
    </div>

    <script language="javascript">
        //GLOBAL VAR
        var range = new Set ();
        //let rep = []
        //Read in JSON data
        $(window).load(function () {
        //JSON data retrieved/stored in 'data'
        $.getJSON("https://jmkeusch.github.io/cs120/unit2_PS3/songs.json", function (data) {
            //Get Genre options
            $.each(data, function (key, value) {
                var genres = value.genre;
                for (let i = 0; i < genres.length; i++) {
                    var gen = value.genre[i];
                    range.add(gen);
                }
            })
        })
        popOptions();
       })

       //Populate genre options on form
       function popOptions() {
            var listItem = "";
            range.forEach (function(value) {
            listItem += "<option value='" + value + "'>" + value + "</option>";
            $("#dropdown").html(listItem);
            })
        }
        
        //event handler
        // window.onload=function() {
        //     btnObj= document.getElementById("btn1");
        //     btnObj.onclick = () => alert("You pressed "+ btnObj.value + "!") 
        // }// end for


        // function displaySongs() {
        //     console.log("in display songs");
        //     let interest = document.getElementById("dropdown").selectedIndex.value;
        //     document.write("sel is: " + sel);

        //     $.getJSON("https://jmkeusch.github.io/cs120/unit2_PS3/songs.json"), function (data) {
        //             var sel = $("#dropdown :selected").text();
        //             //each JSON obj
        //             $.each(data, function (key, value) {
        //                 //each genre array
        //                 $.each(this.genre, function(sel, value) {
        //                     if (sel == this.value) {
        //                         console.log(title.value);
        //                     }
        //                 })
        //             })
        //         }
        //     }       

    </script>
  </body>
</html>

